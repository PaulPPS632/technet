<section class="bg-white py-8 antialiased dark:bg-gray-900 md:py-16">
    <div class="mx-auto max-w-screen-xl px-4 2xl:px-0">
      <h2 class="text-xl font-semibold text-gray-900 dark:text-white sm:text-2xl">Carrito de Compras</h2>
      
      <div class="grid grid-cols-6 mt-6 sm:mt-8 md:gap-6 lg:grid lg:items-start xl:gap-8">
        <div class="col-span-4">
          <div class="flex justify-between mb-5 mx-auto lg:max-w-2xl xl:max-w-4xl">
            <div class="progress activate-carrito rounded-full items-center">
              <svg width="50px" height="50px" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M11.25 18.75C11.25 19.58 10.58 20.25 9.75 20.25C8.92 20.25 8.25 19.58 8.25 18.75C8.25 17.92 8.92 17.25 9.75 17.25C10.58 17.25 11.25 17.92 11.25 18.75ZM16.25 17.25C15.42 17.25 14.75 17.92 14.75 18.75C14.75 19.58 15.42 20.25 16.25 20.25C17.08 20.25 17.75 19.58 17.75 18.75C17.75 17.92 17.08 17.25 16.25 17.25ZM20.73 7.68L18.73 15.68C18.65 16.01 18.35 16.25 18 16.25H8C7.64 16.25 7.33 15.99 7.26 15.63L5.37 5.25H4C3.59 5.25 3.25 4.91 3.25 4.5C3.25 4.09 3.59 3.75 4 3.75H6C6.36 3.75 6.67 4.01 6.74 4.37L7.17 6.75H20C20.23 6.75 20.45 6.86 20.59 7.04C20.73 7.22 20.78 7.46 20.73 7.68ZM19.04 8.25H7.44L8.62 14.75H17.41L19.04 8.25Z" fill="#fff"/>
                </svg>
            </div>
            <div #datos class="progress rounded-full items-center">
              <svg width="50px" height="50px" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M4 21C4 17.134 7.13401 14 11 14C11.3395 14 11.6734 14.0242 12 14.0709M15 7C15 9.20914 13.2091 11 11 11C8.79086 11 7 9.20914 7 7C7 4.79086 8.79086 3 11 3C13.2091 3 15 4.79086 15 7ZM12.5898 21L14.6148 20.595C14.7914 20.5597 14.8797 20.542 14.962 20.5097C15.0351 20.4811 15.1045 20.4439 15.1689 20.399C15.2414 20.3484 15.3051 20.2848 15.4324 20.1574L19.5898 16C20.1421 15.4477 20.1421 14.5523 19.5898 14C19.0376 13.4477 18.1421 13.4477 17.5898 14L13.4324 18.1574C13.3051 18.2848 13.2414 18.3484 13.1908 18.421C13.1459 18.4853 13.1088 18.5548 13.0801 18.6279C13.0478 18.7102 13.0302 18.7985 12.9948 18.975L12.5898 21Z" stroke="#1e429f" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                </svg>
            </div>
            <div #pagar class="progress rounded-full items-center">
              <svg width="50px" height="50px" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M3 8C3 6.34315 4.34315 5 6 5H18C19.6569 5 21 6.34315 21 8V16C21 17.6569 19.6569 19 18 19H6C4.34315 19 3 17.6569 3 16V8Z" stroke="#1e429f" stroke-width="1.5"/>
                <path d="M3 10H21" stroke="#1e429f" stroke-width="1.5"/>
                <path d="M14 15L17 15" stroke="#1e429f" stroke-width="1.5" stroke-linecap="round"/>
              </svg>
            </div>
          </div>
          @switch (estadopayment) {
            @case ("CARRITO") {
              <div class="mx-auto w-full flex-none lg:max-w-2xl xl:max-w-4xl">
                <div class="space-y-6">
                  @for (cartItem of state.products(); track cartItem.product.id) {
                      <app-cart-item
                        class="block"
                        [productCartItem]="cartItem"
                        (onRemove)="onRemove($event)"
                        (onDecrease)="onDecrease($event)"
                        (onIncrease)="onIncrease($event)"
                      />
                  }
                </div>
              </div>
            }
            @case ("DATOS") {
              <div class="mx-auto w-full flex-none lg:max-w-2xl xl:max-w-4xl">
                <form>
                  <div class="grid grid-cols-1 md:grid-cols-3 gap-3">
                    <div class="mb-6">
                      <label for="editNombre" class="block mb-2 text-sm font-medium text-gray-900 dark:text-white">Nombres</label>
                      <input type="text" id="editNombre" name="editNombre" [(ngModel)]="data.customer.billingDetails.firstName" placeholder="Ingrese Nombres"
                        class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500" required />
                    </div>
                    <div class="mb-6">
                      <label for="editApellido" class="block mb-2 text-sm font-medium text-gray-900 dark:text-white">Apellidos</label>
                      <input type="text" id="editApellido" name="editApellido" [(ngModel)]="data.customer.billingDetails.lastName" placeholder="Ingrese Apellidos"
                        class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500" required />
                    </div>
                    <div class="mb-6">
                      <label for="editAddress" class="block mb-2 text-sm font-medium text-gray-900 dark:text-white">Direccion</label>
                      <input type="text" id="editAddress" name="editAddress" [(ngModel)]="data.customer.billingDetails.address" placeholder="Ingrese Apellidos"
                        class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500" required />
                    </div>
                    <div class="mb-6">
                      <label for="editCelular" class="block mb-2 text-sm font-medium text-gray-900 dark:text-white">Celular</label>
                      <input type="text" id="editCelular" name="editCelular" [(ngModel)]="data.customer.billingDetails.cellPhoneNumber" placeholder="Numero de Celular"
                        class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500" required />
                    </div>
                    <div class="mb-6">
                      <label for="editEmail" class="block mb-2 text-sm font-medium text-gray-900 dark:text-white">Email</label>
                      <input type="email" id="editEmail" name="editEmail" [(ngModel)]="data.customer.email" placeholder="ejemplo@gmail.com"
                        class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500" required />
                    </div>
                    <div class="mb-6">
                      <label for="editDNI" class="block mb-2 text-sm font-medium text-gray-900 dark:text-white">DNI</label>
                      <input type="text" id="editDNI" name="editDNI" [(ngModel)]="data.customer.billingDetails.identityCode" placeholder="ejemplo@gmail.com"
                        class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500" required />
                    </div>
                  </div>
                  <a class="hover:cursor-pointer rounded-lg bg-blue-700 px-5 py-2.5 text-sm font-medium text-white hover:bg-blue-800 focus:outline-none focus:ring-4 focus:ring-blue-300 dark:bg-blue-600 dark:hover:bg-blue-700 dark:focus:ring-blue-800" (click)="ProcederPago()">Siguiente Paso</a>
                </form>
                
              </div>
            }
            @case("PAYMENT"){
              <div class="flex flex-col gap-5">
                <a class="flex w-full items-center justify-center rounded-lg border-solid border-2 border-blue-700 bg-white px-5 py-2.5 text-sm font-medium text-blue-700 hover:text-white hover:border-blue-800 hover:bg-blue-800 focus:outline-none focus:ring-4 focus:ring-blue-300 dark:bg-blue-600 dark:hover:bg-blue-700 dark:focus:ring-blue-800 hover:cursor-pointer" (click)="TipoPago = 'TRANSFERENCIA'">Transferencia o Deposito Bancario</a>
                <a class="flex w-full items-center justify-center rounded-lg border-solid border-2 border-blue-700 bg-white px-5 py-2.5 text-sm font-medium text-blue-700 hover:text-white hover:border-blue-800 hover:bg-blue-800 focus:outline-none focus:ring-4 focus:ring-blue-300 dark:bg-blue-600 dark:hover:bg-blue-700 dark:focus:ring-blue-800 hover:cursor-pointer" (click)="ProcesoPagoTarjeta()">Tarjeta de Debito o Credito</a>
                @if(TipoPago == "TRANSFERENCIA"){
                  <div>truee</div>
                }@else if(TipoPago == "TARJETA"){
                  <div class="w-full flex flex-col justify-center items-center">
                    <div id="myPaymentForm" class="kr-smart-form" kr-payment-method="CARDS" kr-popin ></div>
                  </div>
                  
                }
                @if(message =="pagado"){
                  <div>
                      PAGO PROCESADO
                  </div>
                }
              </div>
              
            }
          }
        </div>
        <div class="col-span-2 mx-auto mt-6 max-w-4xl flex-1 space-y-6 lg:mt-0 lg:w-full">
          <div class="space-y-4 rounded-lg border border-gray-200 bg-white p-4 shadow-sm dark:border-gray-700 dark:bg-gray-800 sm:p-6">
            <p class="text-xl font-semibold text-gray-900 dark:text-white">Order de Compra</p>
  
            <div class="space-y-4">
              <div class="space-y-2">
                <dl class="flex items-center justify-between gap-4">
                  <dt class="text-base font-normal text-gray-500 dark:text-gray-400">Precio Original</dt>
                  <dd class="text-base font-medium text-gray-900 dark:text-white">{{ state.price() | currency }}</dd>
                </dl>
  
                <dl class="flex items-center justify-between gap-4">
                  <dt class="text-base font-normal text-gray-500 dark:text-gray-400">Guardado</dt>
                  <dd class="text-base font-medium text-red-600">-$0.00</dd>
                </dl>

              </div>
  
              <dl class="flex items-center justify-between gap-4 border-t border-gray-200 pt-2 dark:border-gray-700">
                <dt class="text-base font-bold text-gray-900 dark:text-white">Total</dt>
                <dd class="text-base font-bold text-gray-900 dark:text-white">{{ state.price() | currency }}</dd>
              </dl>
            </div>
  
            <a class="flex w-full items-center justify-center rounded-lg bg-blue-700 px-5 py-2.5 text-sm font-medium text-white hover:bg-blue-800 focus:outline-none focus:ring-4 focus:ring-blue-300 dark:bg-blue-600 dark:hover:bg-blue-700 dark:focus:ring-blue-800 hover:cursor-pointer" (click)="CompletarDatos()">Proceder Pago</a>
  
            <div class="flex items-center justify-center gap-2">
              <span class="text-sm font-normal text-gray-500 dark:text-gray-400"> o </span>
              <a href="#" title="" class="inline-flex items-center gap-2 text-sm font-medium text-primary-700 underline hover:no-underline dark:text-primary-500">
                Continuar Comprando
                <svg class="h-5 w-5" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24">
                  <path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 12H5m14 0-4 4m4-4-4-4" />
                </svg>
              </a>
            </div>
          </div>
  
          
        </div>
      </div>
    </div>
  </section>